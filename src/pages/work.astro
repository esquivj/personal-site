---
import Layout from '../layouts/Layout.astro';

// =============================================================================
// DATA: All work items organized by phase
// =============================================================================

// Phase 1: Services Era - Flagship content
const flagshipWork = [
  {
    id: 'stablepod',
    title: 'StablePod',
    description: 'Interviews with protocol leaders. A relationship-building vehicle.',
    metric: '28',
    metricLabel: 'episodes',
    image: '/work/stablepod-cover.jpg',
    color: '#1DB954',
    icon: 'üéôÔ∏è',
    subtitle: 'Podcast',
    modal: {
      fullDescription: 'StableLab wanted to build credibility with protocol teams. A podcast let the guests do the talking for us.',
      storySections: [
        {
          title: 'What I Did',
          content: 'Co-hosted and produced 28 episodes. Handled guest booking, episode planning, promotion.',
        },
        {
          title: 'Impact',
          content: 'Guests from Morpho, Euler, Gnosis, Uniswap Foundation, Optimism, dYdX, Ethena, Ronin, Chronicle. One guest conversation converted to an active business discussion. The format opened doors that cold outreach couldn\'t.',
        },
      ],
      metrics: [
        { label: 'Episodes', value: '28' },
        { label: 'Unique Guests', value: '29' },
        { label: 'Duration', value: '2023‚Äì2025' },
      ],
      links: [
        { label: 'Archive Site', url: 'https://stablepod.vercel.app', primary: true },
        { label: 'Spotify', url: 'https://open.spotify.com/show/4LZVPrxKohIaLjgvQRbVwI' },
        { label: 'YouTube', url: 'https://www.youtube.com/@StableLabxyz' },
      ],
    },
  },
  {
    id: 'newsletter',
    title: 'Governance Lab',
    description: 'Weekly newsletter that became a go-to source for DAO governance updates.',
    metric: '121',
    metricLabel: 'issues',
    image: '/work/governance-lab-cover.jpg',
    color: '#6366f1',
    icon: 'üì®',
    subtitle: 'Newsletter',
    modal: {
      fullDescription: 'We wanted consistent visibility. Covering DAO activity weekly made us a go-to source for people tracking governance.',
      storySections: [
        {
          title: 'What I Did',
          content: 'Editorial direction, writing, curation, distribution. 121 editions. Also used it as a channel for blog posts, announcements, product launches.',
        },
        {
          title: 'Impact',
          content: '920+ subscribers, 38% open rate (2x industry average). Frequently cited by hiring prospects and ecosystem actors as how they knew StableLab. The trust signal that made other conversations easier.',
        },
      ],
      metrics: [
        { label: 'Issues', value: '121' },
        { label: 'Subscribers', value: '920+' },
        { label: 'Open Rate', value: '38%' },
      ],
      links: [
        { label: 'Read on Substack', url: 'https://stablelab.substack.com', primary: true },
      ],
    },
  },
];

// Phase 1: Services Marketing
const servicesWork = [
  {
    id: 'proposal-comms',
    title: 'Proposal Amplification',
    description: 'Custom comms strategy for every governance proposal.',
    metric: '50+',
    image: '/work/proposals/unichain.jpg',
    color: '#6366f1',
    icon: 'üì¢',
    subtitle: 'Governance Comms',
    modal: {
      fullDescription: 'Every governance proposal the team submitted needed to pass. Each DAO had different dynamics.',
      storySections: [
        {
          title: 'What I Did',
          content: 'Custom comms strategy for each proposal. Touchpoints across the lifecycle: forum post, temp check push, on-chain vote, outcome announcement.',
        },
        {
          title: 'Impact',
          content: '50+ proposals amplified. In a services model, proposal approval meant contract continuation. Marketing directly supported revenue retention.',
        },
      ],
      images: [
        '/work/proposals/unichain.jpg',
        '/work/proposals/gnosis.jpg',
        '/work/proposals/scroll.jpg',
        '/work/proposals/compound.jpg',
        '/work/proposals/livepeer.jpg',
        '/work/proposals/reserve.jpg',
      ],
    },
  },
  {
    id: 'partnership-announcements',
    title: 'Partnership Announcements',
    description: 'Every new protocol engagement became a blog post.',
    metric: '8+',
    image: '/work/partnerships/makerdao.jpg',
    color: '#6366f1',
    icon: 'ü§ù',
    subtitle: 'Network Building',
    modal: {
      fullDescription: 'These weren\'t public delegation asks. These were structured deals with teams on the other side, which meant we could co-market.',
      storySections: [
        {
          title: 'What I Did',
          content: 'Wrote blog posts for each partnership. Positioned engagements to show a growing network.',
        },
        {
          title: 'Impact',
          content: 'First time we could co-market. MakerDAO announcement was the proof point, real engagement.',
        },
      ],
      blogPosts: [
        { title: 'MakerDAO Partnership', category: 'Business Development', image: '/work/partnerships/makerdao.jpg', url: 'https://stablelab.xyz/blog/stablelab-partners-with-makerdao-to-lead-business-development-efforts' },
        { title: 'Reserve Protocol', category: 'Governance Facilitator', image: '/work/partnerships/reserve.jpg', url: 'https://stablelab.xyz/blog/stablelab-reserve-protocol-governance-facilitator-announcement' },
        { title: 'Gitcoin Partnership', category: 'DAO-to-DAO', image: '/work/partnerships/gitcoin.jpg', url: 'https://stablelab.xyz/blog/stablelab-partners-with-gitcoin-to-enhance-dao-to-dao-collaborations-and-strategic-partnerships' },
        { title: 'Instadapp Partnership', category: 'Governance', image: '/work/partnerships/instadapp.jpg', url: 'https://stablelab.xyz/blog/stablelab-partners-with-instadapp-to-foster-strategic-partnerships' },
        { title: 'Rootstock Collective', category: 'Governance', image: '/work/partnerships/rootstock.jpg', url: 'https://stablelab.xyz/blog/stablelab-partners-with-rootstockcollective-to-support-governance-and-ecosystem-growth' },
      ],
    },
  },
  {
    id: 'conference-marketing',
    title: 'Conference Presence',
    description: 'Event marketing for EthCC, Devconnect, Token2049, KBW.',
    metric: '5+/yr',
    image: '/work/conferences/ethcc-8.jpg',
    color: '#6366f1',
    icon: 'üé§',
    subtitle: 'Event Marketing',
    modal: {
      fullDescription: 'StableLab showed up at major conferences to build relationships and stay visible.',
      storySections: [
        {
          title: 'What I Did',
          content: 'Marketing support. Promoted speaking engagements, created assets for side event participation, amplified team attendance on social.',
        },
        {
          title: 'Impact',
          content: 'Deals accelerated. We benefited from meeting ecosystem actors, delegates, service providers face to face.',
        },
      ],
      images: [
        '/work/conferences/ethcc-8.jpg',
        '/work/conferences/eth-denver.jpg',
        '/work/conferences/solana-breakpoint.jpg',
        '/work/conferences/lagos-blockchain-week.jpg',
        '/work/conferences/token2049.jpg',
        '/work/conferences/token2049-2025.jpg',
        '/work/conferences/ethcc-paris.jpg',
        '/work/conferences/consensus.jpg',
        '/work/conferences/devconnect-2025.jpg',
        '/work/conferences/kbw-2025.jpg',
      ],
    },
  },
  {
    id: 'governance-gathering',
    title: 'Governance Gathering',
    description: 'Side event at EthCC Brussels. 150+ attendees.',
    image: '/work/governance-gathering.avif',
    color: '#7c3aed',
    icon: 'üé™',
    subtitle: 'Event Hosting',
    modal: {
      fullDescription: 'Initiated and project-managed a networking event at EthCC Brussels. Co-hosted with UMA, Wormhole, Tally.',
      metrics: [
        { label: 'Attendees', value: '150+' },
        { label: 'Registrations', value: '258' },
      ],
      images: [
        '/work/agg/event-4.jpg',
        '/work/agg/event-5.jpg',
        '/work/agg/event-6.jpg',
        '/work/agg/event-1.jpg',
      ],
      links: [{ label: 'Event Page', url: 'https://lu.ma/l5tvcrcb', primary: true }],
    },
  },
];

// Phase 2: Product Launch
const productWork = [
  {
    id: 'forse-launch',
    title: 'Forse Launch',
    description: 'Built a product brand from scratch and brought it to market.',
    metric: 'GTM',
    image: '/work/forse-launch-hero.png',
    color: '#FF6B00',
    icon: 'üöÄ',
    subtitle: 'Product Launch',
    modal: {
      fullDescription: 'StableLab\'s first product. Services company going to product. Had to build a brand from scratch and bring it to market.',
      storySections: [
        {
          title: 'The Challenge',
          content: 'First time doing product marketing. No existing brand, no playbook. Had to create everything from naming to launch campaign while borrowing trust from the services brand.',
        },
        {
          title: 'What I Did',
          content: 'Ran naming workshops with CEO, Head of Product, Designer. Landed on "Forse" (Danish word for researcher). Built visual identity with the designer: color palette, wordmark. Created "Built by StableLab" trust transfer. Coordinated launch: teaser week, launch day, post-launch across website, blog, X, LinkedIn, email.',
        },
      ],
      deliverables: {
        title: 'What I Shipped',
        images: [
          { src: '/work/forse-brand-system.jpg', caption: 'Brand system: naming, colors, wordmark, positioning' },
          { src: '/work/forse-workshop.png', caption: 'FigJam workshop: Vision, Audience, Competition, Brand Heart' },
        ],
      },
      results: {
        title: 'Results',
        content: 'Having something live put Forse on partners\' radar before EthCC. Gave BD a reason to reach out and sales a story to tell. The launch created the opening for conversations that followed.',
      },
      links: [
        { label: 'Landing Page', url: 'https://forse.io', primary: true },
        { label: 'Launch Announcement', url: 'https://stablelab.xyz/blog/introducing-forse-by-stablelab' },
      ],
    },
  },
  {
    id: 'forse-rebrand',
    title: 'Forse Rebrand',
    description: 'Multiple signals converged: AI-first tech, wrong ICP, dated design.',
    metric: 'Pivot',
    image: '/work/forse-rebrand-hero.png',
    color: '#FF6B00',
    icon: 'üîÑ',
    subtitle: 'Strategic Pivot',
    modal: {
      fullDescription: 'Initial DAO-focused positioning wasn\'t finding product-market fit. Led a repositioning that touched ICP, brand architecture, visual identity, messaging.',
      storySections: [
        {
          title: 'The Challenge',
          content: 'DAO-focused positioning wasn\'t working. The brand felt overdesigned and dated. We were also considering building the agent platform under a different brand, which would have meant three brands to manage.',
        },
        {
          title: 'What I Did',
          content: 'Led ICP discovery. Found that DAOs weren\'t the buyer. Foundations and Labs with budget authority were. Pushed hard to keep everything under Forse instead of creating a third brand. Directed visual refresh toward modern, minimal, AI-native. Repositioned from "DAO analytics platform" to "The intelligence layer for web3 growth" with a modular brand system (Forse Insights + Forse Agents).',
        },
      ],
      deliverables: {
        title: 'What I Shipped',
        images: [
          { src: '/work/forse-brand-architecture.png', caption: 'Brand architecture: unified system under Forse umbrella' },
          { src: '/work/forse-relaunch-blogpost.jpg', caption: 'Relaunch blogpost: The Intelligence Layer Fueling Web3 Growth' },
        ],
      },
      results: {
        title: 'Results',
        content: 'Clearer positioning set up sales-led GTM. The ICP was right, but the market contracted faster than we could close. Budgets shrank, sales cycles stretched, and we ran out of runway before proving it out.',
      },
    },
  },
];

// Phase 3: Sales-Led GTM
const salesWork = [
  {
    id: 'sales-enablement',
    title: 'Sales One-Pagers',
    description: 'Collateral for long-cycle B2B sales. No A/B testing ‚Äî had to get it right.',
    metric: '3',
    image: '/work/forse-insights.jpg',
    color: '#3b82f6',
    icon: 'üìÑ',
    subtitle: 'Sales Enablement',
    modal: {
      fullDescription: 'Sales needed collateral for each product. The landing page tried to sell everything, but each deal needed targeted materials.',
      storySections: [
        {
          title: 'What I Did',
          content: 'Wrote copy for the Forse Insights one-pager. Reviewed and gave input on Grants Management and Incentive Analyzer. Collaborative: product provided direction, I shaped messaging, designer built it.',
        },
        {
          title: 'Impact',
          content: 'Became the primary sales artifact. Every pitch used these. The collateral did its job, but cycles stretched 6+ months and we couldn\'t close before runway ended.',
        },
      ],
      images: [
        '/work/forse-insights.jpg',
        '/work/forse-grants.jpg',
        '/work/forse-grants-visual.jpg',
        '/work/forse-incentive.jpg',
      ],
    },
  },
  {
    id: 'landing-pages',
    title: 'Landing Page',
    description: 'Defined page architecture and copy framework for sales-first redesign.',
    metric: '1',
    image: '/work/forse-landing-hero.png',
    color: '#3b82f6',
    icon: 'üåê',
    subtitle: 'Page Architecture',
    modal: {
      fullDescription: 'Dependency to the rebrand. Created the structural approach and copy framework before design could build.',
      storySections: [
        {
          title: 'What I Did',
          content: 'Defined page architecture: navigation, section hierarchy, scroll flow. Drafted copy aligned to messaging framework. Documented ICP assumptions, copy criteria, open questions. Collaborative: I proposed structure and copy, refined with product and design.',
        },
        {
          title: 'Impact',
          content: 'Gave the team a blueprint. Sales-first page structure optimized for demo conversions.',
        },
      ],
      images: ['/work/forse-landing-hero.png'],
      links: [
        { label: 'Forse.io', url: 'https://forse.io', primary: true },
      ],
    },
  },
  {
    id: 'content-strategy',
    title: 'Content Strategy',
    description: 'Long cycles and confidentiality meant getting creative.',
    metric: '5',
    image: 'https://framerusercontent.com/images/p3IgX1ZyIvoI0dWrUsa6xqPrpNo.jpg',
    color: '#8b5cf6',
    icon: '‚úçÔ∏è',
    subtitle: 'Creative GTM',
    modal: {
      fullDescription: 'Long sales cycles and few closing deals meant getting creative. Developed content that could ship without client sign-off.',
      storySections: [
        {
          title: 'What I Did',
          content: 'Created content categories that worked around constraints: "Building Forse" technical deep dives, quasi case studies with analyst context, product launches, anonymized work highlights, rebrand announcements.',
        },
        {
          title: 'Impact',
          content: 'Kept publishing when the obvious plays were blocked. Long cycles and confidentiality meant no case studies, no co-marketing. These formats signaled capability without needing client sign-off.',
        },
      ],
      blogPosts: [
        { title: 'Building Forse: Data Stack', category: 'Behind the Work', image: 'https://framerusercontent.com/images/p3IgX1ZyIvoI0dWrUsa6xqPrpNo.jpg', url: 'https://stablelab.xyz/blog/building-forse-the-data-stack-behind-our-terminals' },
        { title: 'Measuring PYUSD Adoption', category: 'Quasi Case Study', image: 'https://framerusercontent.com/images/LGX66YflfGEGJHe68VvY5zlnsk.jpg', url: 'https://stablelab.xyz/blog/measuring-pyusd-adoption-tvl-cohorts-and-real-usage' },
        { title: 'Forse Grants Platform', category: 'Product Launch', image: 'https://framerusercontent.com/images/iFPpzgtjT4lr3IhEhviIN5Vza4.jpg', url: 'https://stablelab.xyz/blog/introducing-the-forse-grants-management-platform' },
        { title: 'GitHub Activity Index', category: 'Work Highlight', image: '/work/github-activity-index.jpg', url: 'https://stablelab.xyz/blog/the-github-activity-index-a-builder-momentum-signal' },
        { title: 'Reintroducing Forse', category: 'Rebrand', image: '/work/forse-relaunch-blogpost.jpg', url: 'https://stablelab.xyz/blog/reintroducing-forse-the-intelligence-layer-fueling-web3-growth' },
      ],
    },
  },
];

// Supporting Work
const supportingWork = {
  swag: {
    id: 'team-swag',
    title: 'Team Swag',
    description: 'Creative direction for offsites and conferences.',
    metric: '8',
    image: '/work/swag/G38s2xAbUAckcN8.jpeg',
    color: '#8B5CF6',
    icon: 'üé®',
    subtitle: 'Creative',
    previewImages: [
      '/work/swag/G38s2xAbUAckcN8.jpeg',
      '/work/swag/G4CFb5KaQAAudN8.jpeg',
      '/work/swag/Gb3M36_bwAQzwTy.jpeg',
    ],
    modal: {
      fullDescription: 'Creative directed internal swag for team offsites and conferences.',
      images: [
        '/work/swag/G38s2xAbUAckcN8.jpeg',
        '/work/swag/G4CFb5KaQAAudN8.jpeg',
        '/work/swag/Gb3M36_bwAQzwTy.jpeg',
        '/work/swag/GbxxrkraMAEk-N6.jpeg',
        '/work/swag/GE1n8HsacAAogMP.jpeg',
        '/work/swag/GgEpB6qW8AAkzuw.jpeg',
        '/work/swag/decentralized-governance.jpg',
        '/work/swag/gothic-tees.jpg',
        '/work/swag/work-shirt.jpg',
        '/work/swag/protocol-agents.jpg',
      ],
    },
  },
};

const behindTheScenes = {
  id: 'behind-the-scenes',
  title: 'Behind the Scenes',
  subtitle: 'Content Capture',
  icon: 'üì∑',
  description: 'Moments from offsites, conferences, and team life.',
  image: '/work/behind-the-scenes.png',
  color: '#ec4899',
  modal: {
    fullDescription: 'As a remote-first team, in-person time was rare. I pushed for content capture at every offsite and conference. Started a disposable camera tradition with categories and prizes. Built up a library of real moments.',
    videos: [
      { title: 'Memories of Bodrum', year: '2025', youtubeId: 'R8k1o2b9HhU' },
      { title: 'A Year in Review', year: '2024', youtubeId: '0jjzvV1jUQM' },
      { title: 'Memories of Phuket', year: '2024', youtubeId: 'lQtC02UaiuQ' },
      { title: 'Phuket Team Offsite', year: '2024', youtubeId: '7MW6yNj45po' },
      { title: 'In Conversation w/ Gustav', year: '2024', youtubeId: 'bdQxQ71DIJE' },
      { title: 'Kuala Lumpur Offsite', year: '2024', youtubeId: 'jbgb3jXZA0o' },
    ],
  },
};
---

<Layout title="Work Portfolio ‚Äî Juan Esquivel's Marketing Projects" description="B2B marketing portfolio from Juan Esquivel's time at StableLab: services marketing, product launch, and sales enablement across three business phases.">
  <header class="header">
    <a href="/" class="back-link">‚Üê Back</a>
  </header>

  <main>
    <!-- Hero Section -->
    <section class="hero">
      <h1>Work</h1>
      <p class="hero-sub">Head of Marketing at StableLab (2023‚Äì2026). Three years of trust-first B2B marketing in crypto: services, product launch, sales-led GTM. Long sales cycles, relationship-driven deals, and programs built for credibility over clicks.</p>
    </section>

    <!-- Timeline -->
    <div class="timeline">
      <div class="timeline-phase">
        <div class="timeline-dot dot-services"></div>
        <div class="timeline-label">Services</div>
        <div class="timeline-desc">Building Trust</div>
        <div class="timeline-years">2023</div>
      </div>
      <div class="timeline-line"></div>
      <div class="timeline-phase">
        <div class="timeline-dot dot-product"></div>
        <div class="timeline-label">Product</div>
        <div class="timeline-desc">Launch & Pivot</div>
        <div class="timeline-years">2024</div>
      </div>
      <div class="timeline-line"></div>
      <div class="timeline-phase">
        <div class="timeline-dot dot-sales"></div>
        <div class="timeline-label">Sales-Led</div>
        <div class="timeline-desc">GTM & Proof Points</div>
        <div class="timeline-years">2024‚Äì25</div>
      </div>
    </div>

    <!-- Partners -->
    <section class="partners">
      <img src="/work/partners.jpg" alt="Partner logos: Aave, Arbitrum, Optimism, Uniswap, Lido, Compound, Gnosis, and 40+ more protocols" loading="lazy" />
    </section>

    <!-- Phase 1: Services -->
    <section class="phase">
      <header class="phase-head">
        <span class="phase-tag phase-tag--services">01</span>
        <div>
          <h2>Building Trust</h2>
          <p>Services era. Goal wasn't lead gen, it was making the brand credible enough that BD conversations didn't start from zero. Content became the trust signal.</p>
        </div>
      </header>

      <!-- Flagship: Podcast & Newsletter -->
      <div class="flagship-row">
        {flagshipWork.map((item) => (
          <button class="flagship" data-modal={item.id}>
            <img src={item.image} alt={item.title} loading="lazy" />
            <div class="flagship-body">
              <div class="flagship-top">
                <h3>{item.title}</h3>
                <span class="flagship-sub">{item.subtitle}</span>
              </div>
              <p>{item.description}</p>
              <div class="flagship-stats">
                <div class="stat">
                  <span class="stat-val">{item.metric}</span>
                  <span class="stat-label">{item.metricLabel}</span>
                </div>
                {item.metricSecondary && (
                  <div class="stat">
                    <span class="stat-val">{item.metricSecondary}</span>
                    <span class="stat-label">{item.metricSecondaryLabel}</span>
                  </div>
                )}
              </div>
            </div>
          </button>
        ))}
      </div>

      <!-- Services Work -->
      <div class="card-row card-row--wide">
        {servicesWork.map((item) => (
          <button class="card card--wide" data-modal={item.id}>
            <div class="card-img">
              <img src={item.image} alt={item.title} loading="lazy" />
            </div>
            <div class="card-body">
              <h4>{item.title}</h4>
              <span class="card-badge">{item.subtitle}</span>
              <p>{item.description}</p>
            </div>
          </button>
        ))}
      </div>
    </section>

    <!-- Phase 2: Product -->
    <section class="phase">
      <header class="phase-head">
        <span class="phase-tag phase-tag--product">02</span>
        <div>
          <h2>Product Launch</h2>
          <p>Productized services insights into Forse. Borrowed trust from the services brand, then discovered DAOs weren't the buyer.</p>
        </div>
      </header>

      <div class="card-row card-row--wide">
        {productWork.map((item) => (
          <button class="card card--wide" data-modal={item.id}>
            <div class="card-img">
              <img src={item.image} alt={item.title} loading="lazy" />
            </div>
            <div class="card-body">
              <h4>{item.title}</h4>
              <span class="card-badge">{item.subtitle}</span>
              <p>{item.description}</p>
            </div>
          </button>
        ))}
      </div>
    </section>

    <!-- Phase 3: Sales-Led -->
    <section class="phase">
      <header class="phase-head">
        <span class="phase-tag phase-tag--sales">03</span>
        <div>
          <h2>Sales-Led GTM</h2>
          <p>Long cycles, few deals, no A/B testing. Marketing's job was arming sales and building proof points.</p>
        </div>
      </header>

      <div class="card-row">
        {salesWork.map((item) => (
          <button class="card" data-modal={item.id}>
            <div class="card-img">
              <img src={item.image} alt={item.title} loading="lazy" />
            </div>
            <div class="card-body">
              <h4>{item.title}</h4>
              <span class="card-badge">{item.subtitle}</span>
              <p>{item.description}</p>
            </div>
          </button>
        ))}
      </div>
    </section>

    <!-- Creative -->
    <section class="creative-section">
      <h2>Creative</h2>
      <div class="creative-grid">
        <button class="creative-card creative-card--swag" data-modal="team-swag">
          <div class="swag-grid-large">
            {supportingWork.swag.previewImages.map((img, i) => (
              <img src={img} alt="Team Swag" loading="lazy" class={i === 0 ? 'swag-main' : ''} />
            ))}
          </div>
          <div class="creative-info">
            <h4>Team Swag</h4>
            <span>Creative direction for offsites and conferences</span>
          </div>
        </button>
        <button class="creative-card creative-card--bts" data-modal="behind-the-scenes">
          <img src={behindTheScenes.image} alt="Behind the Scenes" loading="lazy" />
          <div class="creative-overlay">
            <h4>Behind the Scenes</h4>
            <span>Team videos and moments ¬∑ 6 videos</span>
          </div>
        </button>
      </div>
    </section>

  </main>

  <!-- Modal -->
  <div class="modal-bg" id="modalBg">
    <div class="modal" id="modal" role="dialog" aria-modal="true">
      <button class="modal-x" id="modalX" aria-label="Close">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
      </button>
      <div class="modal-inner" id="modalInner"></div>
    </div>
  </div>

  <!-- Lightbox for gallery images -->
  <div class="lightbox" id="lightbox">
    <button class="lightbox-close" id="lightboxClose" aria-label="Close">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
    </button>
    <img id="lightboxImg" src="" alt="" />
  </div>

  <script define:vars={{ flagshipWork, servicesWork, productWork, salesWork, supportingWork, behindTheScenes }}>
    window.workData = [
      ...flagshipWork,
      ...servicesWork,
      ...productWork,
      ...salesWork,
      supportingWork.swag,
      behindTheScenes,
    ].reduce((acc, item) => { acc[item.id] = item; return acc; }, {});
  </script>
</Layout>

<style>
  /* ========================================
     BASE & LAYOUT
     ======================================== */
  .header {
    margin-bottom: 2rem;
  }

  .back-link {
    font-size: 0.8125rem;
    color: #666;
    transition: color 0.15s;
  }
  .back-link:hover {
    color: #999;
  }

  /* Hero */
  .hero {
    margin-bottom: 2.5rem;
  }
  .hero h1 {
    font-size: 2rem;
    font-weight: 600;
    letter-spacing: -0.02em;
    margin-bottom: 0.75rem;
  }
  .hero-sub {
    color: #666;
    font-size: 0.9375rem;
    line-height: 1.6;
    max-width: 520px;
  }

  /* Timeline */
  .timeline {
    display: flex;
    align-items: flex-start;
    justify-content: center;
    gap: 0;
    margin-bottom: 2.5rem;
    padding: 1.5rem 0;
  }

  .timeline-phase {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.375rem;
    min-width: 90px;
  }

  .timeline-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }

  .dot-services {
    background: #6366f1;
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
  }
  .dot-product {
    background: #f97316;
    box-shadow: 0 0 10px rgba(249, 115, 22, 0.5);
  }
  .dot-sales {
    background: #22c55e;
    box-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
  }

  .timeline-label {
    font-size: 0.8125rem;
    font-weight: 500;
    color: #e5e5e5;
  }

  .timeline-desc {
    font-size: 0.6875rem;
    color: #555;
  }

  .timeline-years {
    font-size: 0.625rem;
    color: #444;
  }

  .timeline-line {
    flex: 1;
    height: 1px;
    background: #222;
    margin-top: 4px;
    max-width: 60px;
    min-width: 30px;
  }

  @media (max-width: 480px) {
    .timeline {
      flex-direction: column;
      align-items: flex-start;
      gap: 0;
    }
    .timeline-phase {
      flex-direction: row;
      gap: 0.75rem;
      min-width: auto;
    }
    .timeline-line {
      width: 1px;
      height: 20px;
      min-width: 1px;
      max-width: 1px;
      margin: 0 0 0 4px;
    }
  }

  /* Partners */
  .partners {
    margin-bottom: 3rem;
    border-radius: 8px;
    overflow: hidden;
    opacity: 0.85;
  }
  .partners:hover {
    opacity: 1;
  }
  .partners img {
    width: 100%;
    display: block;
  }

  /* ========================================
     PHASE SECTIONS
     ======================================== */
  .phase {
    margin-bottom: 4rem;
  }

  .phase-head {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
    margin-bottom: 1.5rem;
  }

  .phase-tag {
    font-size: 0.625rem;
    font-weight: 700;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    flex-shrink: 0;
    margin-top: 0.125rem;
  }
  .phase-tag--services {
    background: rgba(99, 102, 241, 0.15);
    color: #818cf8;
  }
  .phase-tag--product {
    background: rgba(249, 115, 22, 0.15);
    color: #fb923c;
  }
  .phase-tag--sales {
    background: rgba(34, 197, 94, 0.15);
    color: #4ade80;
  }

  .phase-head h2 {
    font-size: 1rem;
    font-weight: 600;
    color: #e5e5e5;
    margin-bottom: 0.25rem;
    text-transform: none;
    letter-spacing: -0.01em;
  }

  .phase-head p {
    font-size: 0.875rem;
    color: #666;
    line-height: 1.5;
  }

  /* ========================================
     FLAGSHIP CARDS (Podcast, Newsletter)
     ======================================== */
  .flagship-row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-bottom: 1rem;
  }

  @media (max-width: 600px) {
    .flagship-row {
      grid-template-columns: 1fr;
    }
  }

  .flagship {
    display: flex;
    flex-direction: column;
    background: #0f0f0f;
    border: 1px solid #1a1a1a;
    border-radius: 10px;
    overflow: hidden;
    text-align: left;
    font-family: inherit;
    color: inherit;
    cursor: pointer;
    transition: border-color 0.2s, background 0.2s;
  }
  .flagship:hover {
    background: #111;
    border-color: #262626;
  }

  .flagship > img {
    width: 100%;
    height: 140px;
    object-fit: cover;
  }

  .flagship-body {
    padding: 1.25rem;
    display: flex;
    flex-direction: column;
    gap: 0.625rem;
  }

  .flagship-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
  }

  .flagship-top h3 {
    font-size: 1.0625rem;
    font-weight: 600;
    color: #f0f0f0;
  }

  .flagship-sub {
    font-size: 0.625rem;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    padding: 0.1875rem 0.5rem;
    background: #1a1a1a;
    border-radius: 3px;
  }

  .flagship-body > p {
    font-size: 0.8125rem;
    color: #777;
    line-height: 1.5;
  }

  .flagship-stats {
    display: flex;
    gap: 1.5rem;
    margin-top: 0.5rem;
    padding-top: 0.75rem;
    border-top: 1px solid #1a1a1a;
  }

  .stat {
    display: flex;
    flex-direction: column;
  }
  .stat-val {
    font-size: 1.25rem;
    font-weight: 700;
    color: #e5e5e5;
  }
  .stat-label {
    font-size: 0.625rem;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  /* ========================================
     STANDARD CARDS
     ======================================== */
  .card-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.875rem;
  }

  @media (max-width: 700px) {
    .card-row {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  @media (max-width: 480px) {
    .card-row {
      grid-template-columns: 1fr;
    }
  }

  .card-row--wide {
    grid-template-columns: repeat(2, 1fr);
  }
  @media (max-width: 480px) {
    .card-row--wide {
      grid-template-columns: 1fr;
    }
  }

  .card {
    display: flex;
    flex-direction: column;
    background: transparent;
    border: 1px solid #1a1a1a;
    border-radius: 6px;
    overflow: hidden;
    text-align: left;
    font-family: inherit;
    color: inherit;
    cursor: pointer;
    transition: border-color 0.2s, background 0.2s;
  }
  .card:hover {
    background: #0f0f0f;
    border-color: #262626;
  }

  .card-img {
    aspect-ratio: 16/10;
    overflow: hidden;
  }
  .card-img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
  }
  .card:hover .card-img img {
    transform: scale(1.03);
  }

  .card-body {
    padding: 1rem;
  }

  .card-body h4 {
    margin-bottom: 0.5rem;
  }

  .card-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    margin-bottom: 0.375rem;
  }

  .card-top h4 {
    font-size: 0.875rem;
    font-weight: 500;
    color: #e5e5e5;
  }

  .card-metric {
    font-size: 0.6875rem;
    font-weight: 600;
    color: #555;
    white-space: nowrap;
  }

  .card-badge {
    display: inline-block;
    font-size: 0.5625rem;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    padding: 0.125rem 0.375rem;
    border: 1px solid #262626;
    border-radius: 3px;
    margin-bottom: 0.5rem;
  }

  .card-body > p {
    font-size: 0.8125rem;
    color: #666;
    line-height: 1.45;
  }

  /* Wide card variant */
  .card--wide .card-img {
    aspect-ratio: 2/1;
  }


  /* ========================================
     CREATIVE SECTION
     ======================================== */
  .creative-section {
    margin-bottom: 3rem;
  }
  .creative-section h2 {
    font-size: 0.6875rem;
    font-weight: 600;
    color: #444;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
  }

  .creative-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }
  @media (max-width: 600px) {
    .creative-grid {
      grid-template-columns: 1fr;
    }
  }

  .creative-card {
    position: relative;
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    border: 1px solid #1a1a1a;
    background: transparent;
    font-family: inherit;
    color: inherit;
    text-align: left;
    transition: border-color 0.2s, background 0.2s;
  }
  .creative-card:hover {
    border-color: #262626;
    background: #0f0f0f;
  }

  .creative-card--swag {
    display: flex;
    flex-direction: column;
  }

  .swag-grid-large {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 2px;
    height: 200px;
    overflow: hidden;
  }
  .swag-grid-large img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .swag-grid-large .swag-main {
    grid-row: span 2;
  }

  .creative-info {
    padding: 1rem;
  }
  .creative-info h4 {
    font-size: 0.9375rem;
    font-weight: 500;
    margin-bottom: 0.25rem;
  }
  .creative-info span {
    font-size: 0.75rem;
    color: #666;
  }

  .creative-card--bts {
    position: relative;
  }
  .creative-card--bts > img {
    width: 100%;
    height: 100%;
    min-height: 260px;
    object-fit: cover;
    display: block;
    transition: transform 0.3s;
  }
  .creative-card--bts:hover > img {
    transform: scale(1.02);
  }

  .creative-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 1.5rem 1rem 1rem;
    background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.7) 50%, transparent 100%);
  }
  .creative-overlay h4 {
    font-size: 0.9375rem;
    font-weight: 500;
    color: #fff;
    margin-bottom: 0.25rem;
  }
  .creative-overlay span {
    font-size: 0.75rem;
    color: #999;
  }

  /* ========================================
     VIDEOS
     ======================================== */

  .video-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.75rem;
  }
  @media (max-width: 600px) {
    .video-row {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  @media (max-width: 360px) {
    .video-row {
      grid-template-columns: 1fr;
    }
  }

  .video-card {
    position: relative;
    display: flex;
    flex-direction: column;
    border: 1px solid #1a1a1a;
    border-radius: 6px;
    overflow: hidden;
    transition: border-color 0.2s;
  }
  .video-card:hover {
    border-color: #262626;
  }

  .video-card > img {
    width: 100%;
    aspect-ratio: 16/9;
    object-fit: cover;
  }

  .video-play {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.25);
    opacity: 0;
    transition: opacity 0.2s;
  }
  .video-card:hover .video-play {
    opacity: 1;
  }
  .video-play svg {
    width: 28px;
    height: 28px;
    color: #fff;
  }

  .video-info {
    padding: 0.625rem 0.75rem;
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    gap: 0.5rem;
  }
  .video-info > span:first-child {
    font-size: 0.75rem;
    font-weight: 500;
    color: #ccc;
  }
  .video-year {
    font-size: 0.625rem;
    color: #555;
  }

  /* ========================================
     MODAL
     ======================================== */
  .modal-bg {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.88);
    backdrop-filter: blur(8px);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s, visibility 0.2s;
  }
  .modal-bg.open {
    opacity: 1;
    visibility: visible;
  }

  .modal {
    background: #111;
    border: 1px solid #222;
    border-radius: 12px;
    max-width: 560px;
    width: 100%;
    max-height: calc(100vh - 2rem);
    overflow-y: auto;
    position: relative;
    transform: translateY(12px);
    opacity: 0;
    transition: transform 0.2s ease-out, opacity 0.2s;
    scrollbar-width: thin;
    scrollbar-color: #333 transparent;
  }

  .modal::-webkit-scrollbar {
    width: 6px;
  }

  .modal::-webkit-scrollbar-track {
    background: transparent;
  }

  .modal::-webkit-scrollbar-thumb {
    background: #333;
    border-radius: 3px;
  }

  .modal::-webkit-scrollbar-thumb:hover {
    background: #444;
  }
  .modal-bg.open .modal {
    transform: translateY(0);
    opacity: 1;
  }

  .modal-x {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #1a1a1a;
    border: 1px solid #2a2a2a;
    border-radius: 6px;
    color: #666;
    cursor: pointer;
    z-index: 10;
    transition: color 0.15s, background 0.15s;
  }
  .modal-x:hover {
    color: #999;
    background: #222;
  }
  .modal-x svg {
    width: 12px;
    height: 12px;
  }

  .modal-inner {
    padding: 0;
  }

  /* Modal content styles via :global */
  :global(.m-img) {
    width: 100%;
    aspect-ratio: 16/10;
    object-fit: cover;
    border-radius: 12px 12px 0 0;
  }

  :global(.m-body) {
    padding: 1.25rem;
  }

  :global(.m-head) {
    display: flex;
    align-items: flex-start;
    gap: 0.875rem;
    margin-bottom: 1rem;
    padding-right: 2rem;
  }

  :global(.m-icon) {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.125rem;
    flex-shrink: 0;
    background: #1a1a1a;
  }

  :global(.m-title) {
    font-size: 1rem;
    font-weight: 600;
    color: #fff;
    margin-bottom: 0.125rem;
  }

  :global(.m-sub) {
    font-size: 0.6875rem;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  :global(.m-desc) {
    font-size: 0.8125rem;
    color: #888;
    line-height: 1.55;
    margin-bottom: 1.25rem;
    padding-bottom: 1.25rem;
    border-bottom: 1px solid #1a1a1a;
  }

  :global(.m-metrics) {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1.25rem;
    margin-bottom: 1.5rem;
  }

  :global(.m-stat) {
    background: #1a1a1a;
    border-radius: 8px;
    padding: 1rem 1.5rem;
    text-align: center;
    min-width: 90px;
  }

  :global(.m-stat-val) {
    font-size: 1.125rem;
    font-weight: 700;
    color: #fff;
  }

  :global(.m-stat-label) {
    font-size: 0.5625rem;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  :global(.m-section) {
    background: #1a1a1a;
    border-radius: 8px;
    padding: 0.875rem;
    margin-bottom: 0.75rem;
  }

  :global(.m-section-title) {
    font-size: 0.5625rem;
    font-weight: 600;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.375rem;
  }

  :global(.m-section-content) {
    font-size: 0.75rem;
    color: #999;
    line-height: 1.5;
  }

  /* Role badge for case studies */
  :global(.m-role-badge) {
    display: flex;
    flex-wrap: wrap;
    align-items: baseline;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
    border: 1px solid rgba(99, 102, 241, 0.2);
    border-radius: 8px;
    margin-bottom: 1rem;
  }

  :global(.m-role-label) {
    font-size: 0.5625rem;
    font-weight: 700;
    color: #818cf8;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  :global(.m-role-text) {
    font-size: 0.75rem;
    color: #ccc;
    line-height: 1.4;
  }

  /* Deliverables section */
  :global(.m-deliverables) {
    margin-bottom: 1.25rem;
    padding: 1rem;
    background: #0a0a0a;
    border: 1px solid #1a1a1a;
    border-radius: 10px;
  }

  :global(.m-deliverables-title) {
    font-size: 0.625rem;
    font-weight: 700;
    color: #4ade80;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 0.75rem;
  }

  :global(.m-deliverables-gallery) {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
  }

  :global(.m-deliverables-img-wrap) {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
  }

  :global(.m-deliverables-img) {
    width: 100%;
    border-radius: 6px;
    cursor: pointer;
    transition: opacity 0.15s;
  }

  :global(.m-deliverables-img:hover) {
    opacity: 0.9;
  }

  :global(.m-deliverables-caption) {
    font-size: 0.6875rem;
    color: #666;
    font-style: italic;
  }

  :global(.m-deliverables-list) {
    display: flex;
    flex-wrap: wrap;
    gap: 0.375rem;
  }

  :global(.m-deliverable-item) {
    font-size: 0.6875rem;
    color: #888;
    padding: 0.25rem 0.5rem;
    background: #1a1a1a;
    border-radius: 4px;
  }

  /* Story sections (cleaner narrative flow) */
  :global(.m-story-sections) {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    margin-bottom: 1.5rem;
  }

  :global(.m-story-section) {

  }

  :global(.m-story-section-title) {
    font-size: 0.6875rem;
    font-weight: 700;
    color: #666;
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  :global(.m-story-section-content) {
    font-size: 0.8125rem;
    color: #aaa;
    line-height: 1.65;
  }

  /* Results section */
  :global(.m-results) {
    margin-top: 1.25rem;
    padding: 1rem;
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.08) 0%, rgba(34, 197, 94, 0.03) 100%);
    border: 1px solid rgba(34, 197, 94, 0.15);
    border-radius: 8px;
  }

  :global(.m-results-title) {
    font-size: 0.625rem;
    font-weight: 700;
    color: #4ade80;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: 0.5rem;
  }

  :global(.m-results-content) {
    font-size: 0.8125rem;
    color: #aaa;
    line-height: 1.6;
  }

  /* Rich sections for detailed case studies (legacy) */
  :global(.m-rich-sections) {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  :global(.m-rich-section) {
    padding: 1rem;
    background: #1a1a1a;
    border-radius: 8px;
    border-left: 3px solid #333;
  }

  :global(.m-rich-section-title) {
    font-size: 0.75rem;
    font-weight: 600;
    color: #e5e5e5;
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  :global(.m-rich-section-content) {
    font-size: 0.8125rem;
    color: #999;
    line-height: 1.6;
  }

  :global(.m-links) {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1.25rem;
    padding-top: 1.25rem;
    border-top: 1px solid #1a1a1a;
  }

  :global(.m-link) {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.5rem 0.875rem;
    font-size: 0.75rem;
    font-weight: 500;
    border-radius: 6px;
    text-decoration: none;
    transition: all 0.15s;
  }

  :global(.m-link--primary) {
    background: #fff;
    color: #000;
  }
  :global(.m-link--primary:hover) {
    background: #e5e5e5;
  }

  :global(.m-link--secondary) {
    background: #1a1a1a;
    color: #888;
    border: 1px solid #2a2a2a;
  }
  :global(.m-link--secondary:hover) {
    color: #bbb;
    background: #222;
  }

  :global(.m-link svg) {
    width: 12px;
    height: 12px;
  }

  :global(.m-gallery) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5rem;
    margin-top: 1rem;
  }

  :global(.m-gallery img) {
    width: 100%;
    aspect-ratio: 16/10;
    object-fit: cover;
    border-radius: 6px;
  }

  :global(.m-blog-grid) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.625rem;
    margin-top: 0.75rem;
  }

  :global(.m-blog-card) {
    display: block;
    border-radius: 6px;
    overflow: hidden;
    background: #1a1a1a;
    text-decoration: none;
    transition: background 0.15s;
  }
  :global(.m-blog-card:hover) {
    background: #222;
  }

  :global(.m-blog-card img) {
    width: 100%;
    height: 140px;
    object-fit: cover;
  }

  :global(.m-blog-info) {
    padding: 0.5rem 0.625rem;
  }

  :global(.m-blog-cat) {
    font-size: 0.5rem;
    font-weight: 600;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  :global(.m-blog-info h5) {
    font-size: 0.6875rem;
    font-weight: 500;
    color: #ccc;
    margin-top: 0.125rem;
    line-height: 1.3;
  }

  :global(.m-ba) {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid #1a1a1a;
  }

  :global(.m-ba-grid) {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
    margin-top: 0.5rem;
  }

  :global(.m-ba-item) {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
  }

  :global(.m-ba-label) {
    font-size: 0.5625rem;
    font-weight: 600;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  :global(.m-ba-item img) {
    width: 100%;
    border-radius: 4px;
    border: 1px solid #222;
  }

  :global(.m-ba-tagline) {
    font-size: 0.625rem;
    color: #666;
    font-style: italic;
  }

  :global(.m-videos) {
    margin-top: 1rem;
  }

  :global(.m-videos-title) {
    font-size: 0.5625rem;
    font-weight: 600;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.75rem;
  }

  :global(.m-video-grid) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.625rem;
  }

  :global(.m-video-card) {
    display: block;
    position: relative;
    border-radius: 6px;
    overflow: hidden;
    text-decoration: none;
    transition: transform 0.15s;
  }
  :global(.m-video-card:hover) {
    transform: scale(1.02);
  }

  :global(.m-video-card img) {
    width: 100%;
    aspect-ratio: 16/9;
    object-fit: cover;
    display: block;
  }

  :global(.m-video-play) {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.3);
    opacity: 0;
    transition: opacity 0.15s;
  }
  :global(.m-video-card:hover .m-video-play) {
    opacity: 1;
  }
  :global(.m-video-play svg) {
    width: 32px;
    height: 32px;
    color: #fff;
  }

  :global(.m-video-info) {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 0.75rem 0.5rem 0.5rem;
    background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.7) 50%, transparent 100%);
  }

  :global(.m-video-info span) {
    font-size: 0.6875rem;
    color: #fff;
    font-weight: 500;
  }

  :global(.m-video-year) {
    font-size: 0.5625rem;
    color: #888;
    margin-left: 0.375rem;
  }

  :global(.gallery-img) {
    cursor: pointer;
    transition: opacity 0.15s, transform 0.15s;
  }
  :global(.gallery-img:hover) {
    opacity: 0.85;
    transform: scale(1.02);
  }

  /* Lightbox */
  .lightbox {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.95);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s, visibility 0.2s;
  }
  .lightbox.open {
    opacity: 1;
    visibility: visible;
  }

  .lightbox img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: 8px;
    transform: scale(0.95);
    opacity: 0;
    transition: transform 0.2s ease-out, opacity 0.2s;
  }
  .lightbox.open img {
    transform: scale(1);
    opacity: 1;
  }

  .lightbox-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    color: #fff;
    cursor: pointer;
    transition: background 0.15s;
  }
  .lightbox-close:hover {
    background: rgba(255, 255, 255, 0.2);
  }
  .lightbox-close svg {
    width: 18px;
    height: 18px;
  }

  /* ========================================
     MOBILE OPTIMIZATIONS
     ======================================== */
  @media (max-width: 480px) {
    /* Hero */
    .hero h1 {
      font-size: 1.5rem;
    }
    .hero-sub {
      font-size: 0.875rem;
    }

    /* Phase headers */
    .phase-head {
      flex-direction: column;
      gap: 0.5rem;
    }
    .phase-tag {
      margin-top: 0;
    }

    /* Flagship cards */
    .flagship-body {
      padding: 1rem;
    }
    .flagship-top h3 {
      font-size: 0.9375rem;
    }
    .flagship-stats {
      gap: 1rem;
    }
    .stat-val {
      font-size: 1.125rem;
    }

    /* Standard cards */
    .card-body {
      padding: 0.875rem;
    }
    .card-top h4 {
      font-size: 0.8125rem;
    }
    .card-body > p {
      font-size: 0.75rem;
    }

    /* Creative cards */
    .swag-grid-large {
      height: 160px;
    }
    .creative-info {
      padding: 0.875rem;
    }
    .creative-card--bts > img {
      min-height: 200px;
    }

    /* Video cards */
    .video-info {
      padding: 0.5rem 0.625rem;
    }
    .video-info > span:first-child {
      font-size: 0.6875rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }

  /* Mobile modal optimizations */
  @media (max-width: 480px) {
    .modal-bg {
      padding: 0;
      align-items: flex-end;
    }
    .modal {
      max-width: 100%;
      max-height: 92vh;
      border-radius: 16px 16px 0 0;
      border-bottom: none;
    }
    .modal-bg.open .modal {
      transform: translateY(0);
    }
    .modal-x {
      top: 0.5rem;
      right: 0.5rem;
    }
  }

  @media (max-width: 480px) {
    :global(.m-body) {
      padding: 1rem;
    }
    :global(.m-head) {
      gap: 0.625rem;
      padding-right: 1.5rem;
    }
    :global(.m-icon) {
      width: 36px;
      height: 36px;
      font-size: 1rem;
    }
    :global(.m-title) {
      font-size: 0.9375rem;
    }
    :global(.m-desc) {
      font-size: 0.75rem;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
    }
    :global(.m-metrics) {
      gap: 0.75rem;
      margin-bottom: 1.25rem;
    }
    :global(.m-stat) {
      padding: 0.75rem 1rem;
      min-width: 80px;
    }
    :global(.m-stat-val) {
      font-size: 1rem;
    }
    :global(.m-section) {
      padding: 0.75rem;
    }
    :global(.m-section-content) {
      font-size: 0.6875rem;
    }
    :global(.m-story-section-content) {
      font-size: 0.75rem;
    }
    :global(.m-gallery) {
      grid-template-columns: 1fr;
      gap: 0.375rem;
    }
    :global(.m-blog-grid) {
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }
    :global(.m-blog-card img) {
      height: 120px;
    }
    :global(.m-ba-grid) {
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }
    :global(.m-links) {
      margin-top: 1rem;
      padding-top: 1rem;
    }
    :global(.m-link) {
      padding: 0.5rem 0.75rem;
      font-size: 0.6875rem;
    }
    :global(.m-deliverables) {
      padding: 0.875rem;
    }
    :global(.m-results) {
      padding: 0.875rem;
    }
    :global(.m-results-content) {
      font-size: 0.75rem;
    }
    :global(.m-role-badge) {
      padding: 0.625rem 0.875rem;
    }
    :global(.m-role-text) {
      font-size: 0.6875rem;
    }
  }

  /* Lightbox mobile */
  @media (max-width: 480px) {
    .lightbox {
      padding: 0.5rem;
    }
    .lightbox-close {
      top: 0.5rem;
      right: 0.5rem;
      width: 36px;
      height: 36px;
    }
  }
</style>

<script>
  const bg = document.getElementById('modalBg');
  const modal = document.getElementById('modal');
  const inner = document.getElementById('modalInner');
  const closeBtn = document.getElementById('modalX');

  document.querySelectorAll('[data-modal]').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.getAttribute('data-modal');
      const data = (window as any).workData[id];
      if (data) openModal(data);
    });
  });

  closeBtn?.addEventListener('click', closeModal);
  bg?.addEventListener('click', (e) => { if (e.target === bg) closeModal(); });
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

  function openModal(d: any) {
    const m = d.modal;
    if (!m || !inner) return;

    const icon = d.icon || 'üìÅ';
    const imgHtml = d.image ? `<img class="m-img" src="${d.image}" alt="${d.title}" />` : '';

    const metricsHtml = m.metrics ? `
      <div class="m-metrics">
        ${m.metrics.map((x: any) => `
          <div class="m-stat">
            <div class="m-stat-val">${x.value}</div>
            <div class="m-stat-label">${x.label}</div>
          </div>
        `).join('')}
      </div>
    ` : '';

    // Build sections from either legacy format or new sections array
    const sections = [];
    if (m.role) sections.push({ t: 'Role', c: m.role });
    if (m.cohosts) sections.push({ t: 'Co-hosts', c: m.cohosts });
    if (m.guests) sections.push({ t: 'Notable Guests', c: m.guests });
    if (m.highlights) sections.push({ t: 'Highlights', c: m.highlights });

    const legacySectionsHtml = sections.map(s => `
      <div class="m-section">
        <div class="m-section-title">${s.t}</div>
        <div class="m-section-content">${s.c}</div>
      </div>
    `).join('');

    // Role badge
    const roleBadgeHtml = m.role ? `
      <div class="m-role-badge">
        <span class="m-role-label">Role</span>
        <span class="m-role-text">${m.role}</span>
      </div>
    ` : '';

    // Story sections (Challenge ‚Üí What I Did ‚Üí Results)
    const storySectionsHtml = m.storySections ? `
      <div class="m-story-sections">
        ${m.storySections.map((s: any) => `
          <div class="m-story-section">
            <div class="m-story-section-title">${s.title}</div>
            <div class="m-story-section-content">${s.content}</div>
          </div>
        `).join('')}
      </div>
    ` : '';

    // Deliverables section with images and list
    const deliverablesHtml = m.deliverables ? `
      <div class="m-deliverables">
        <div class="m-deliverables-title">${m.deliverables.title}</div>
        ${m.deliverables.images ? `
          <div class="m-deliverables-gallery">
            ${m.deliverables.images.map((img: any) => `
              <div class="m-deliverables-img-wrap">
                <img src="${img.src}" alt="${img.caption}" class="m-deliverables-img gallery-img" data-src="${img.src}" />
                <span class="m-deliverables-caption">${img.caption}</span>
              </div>
            `).join('')}
          </div>
        ` : m.deliverables.image ? `
          <img src="${m.deliverables.image}" alt="Deliverables" class="m-deliverables-img gallery-img" data-src="${m.deliverables.image}" />
        ` : ''}
        ${m.deliverables.items ? `
          <div class="m-deliverables-list">
            ${m.deliverables.items.map((item: string) => `<span class="m-deliverable-item">${item}</span>`).join('')}
          </div>
        ` : ''}
      </div>
    ` : '';

    // Results section
    const resultsHtml = m.results ? `
      <div class="m-results">
        <div class="m-results-title">${m.results.title}</div>
        <div class="m-results-content">${m.results.content}</div>
      </div>
    ` : '';

    // New rich sections format for detailed case studies (legacy format)
    const richSectionsHtml = m.sections ? `
      ${roleBadgeHtml}
      ${deliverablesHtml}
      <div class="m-rich-sections">
        ${m.sections.map((s: any) => `
          <div class="m-rich-section">
            <div class="m-rich-section-title">${s.title}</div>
            <div class="m-rich-section-content">${s.content}</div>
          </div>
        `).join('')}
      </div>
    ` : '';

    // Story-based layout (new format)
    const storyLayoutHtml = m.storySections ? `
      ${roleBadgeHtml}
      ${storySectionsHtml}
      ${deliverablesHtml}
      ${resultsHtml}
    ` : '';

    const sectionsHtml = storyLayoutHtml || richSectionsHtml || legacySectionsHtml;

    const linksHtml = m.links ? `
      <div class="m-links">
        ${m.links.map((l: any) => `
          <a href="${l.url}" target="_blank" class="m-link ${l.primary ? 'm-link--primary' : 'm-link--secondary'}">
            ${l.label}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 17L17 7M17 7H7M17 7v10"/></svg>
          </a>
        `).join('')}
      </div>
    ` : '';

    const galleryHtml = m.images ? `
      <div class="m-gallery">
        ${m.images.map((src: string) => `<img src="${src}" alt="${d.title}" class="gallery-img" data-src="${src}" />`).join('')}
      </div>
    ` : '';

    const blogHtml = m.blogPosts ? `
      <div class="m-section-title" style="margin-top:1rem">Content Shipped</div>
      <div class="m-blog-grid">
        ${m.blogPosts.map((p: any) => `
          <a href="${p.url}" target="_blank" class="m-blog-card">
            <img src="${p.image}" alt="${p.title}" />
            <div class="m-blog-info">
              <span class="m-blog-cat">${p.category}</span>
              <h5>${p.title}</h5>
            </div>
          </a>
        `).join('')}
      </div>
    ` : '';

    const baHtml = m.beforeAfter ? `
      <div class="m-ba">
        <div class="m-section-title">The Pivot</div>
        <div class="m-ba-grid">
          <div class="m-ba-item">
            <span class="m-ba-label">${m.beforeAfter.before.label}</span>
            <img src="${m.beforeAfter.before.image}" alt="Before" />
            <span class="m-ba-tagline">${m.beforeAfter.before.tagline}</span>
          </div>
          <div class="m-ba-item">
            <span class="m-ba-label">${m.beforeAfter.after.label}</span>
            <img src="${m.beforeAfter.after.image}" alt="After" />
            <span class="m-ba-tagline">${m.beforeAfter.after.tagline}</span>
          </div>
        </div>
      </div>
    ` : '';

    const videosHtml = m.videos ? `
      <div class="m-videos">
        <div class="m-videos-title">Team Videos</div>
        <div class="m-video-grid">
          ${m.videos.map((v: any) => `
            <a href="https://youtu.be/${v.youtubeId}" target="_blank" rel="noopener noreferrer" class="m-video-card">
              <img src="https://img.youtube.com/vi/${v.youtubeId}/mqdefault.jpg" alt="${v.title}" />
              <div class="m-video-play">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
              </div>
              <div class="m-video-info">
                <span>${v.title}</span>
                <span class="m-video-year">${v.year}</span>
              </div>
            </a>
          `).join('')}
        </div>
      </div>
    ` : '';

    inner.innerHTML = `
      ${imgHtml}
      <div class="m-body">
        <div class="m-head">
          <div class="m-icon">${icon}</div>
          <div>
            <div class="m-title">${d.title}</div>
            <div class="m-sub">${d.subtitle}</div>
          </div>
        </div>
        <p class="m-desc">${m.fullDescription}</p>
        ${metricsHtml}
        ${sectionsHtml}
        ${baHtml}
        ${galleryHtml}
        ${blogHtml}
        ${videosHtml}
        ${linksHtml}
      </div>
    `;

    bg?.classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    bg?.classList.remove('open');
    document.body.style.overflow = '';
  }

  // Lightbox functionality
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightboxImg') as HTMLImageElement;
  const lightboxClose = document.getElementById('lightboxClose');

  // Use event delegation for dynamically created gallery images
  inner?.addEventListener('click', (e) => {
    const target = e.target as HTMLElement;
    if (target.classList.contains('gallery-img')) {
      const src = target.getAttribute('data-src');
      if (src && lightboxImg && lightbox) {
        lightboxImg.src = src;
        lightboxImg.alt = target.alt || 'Gallery image';
        lightbox.classList.add('open');
      }
    }
  });

  lightboxClose?.addEventListener('click', closeLightbox);
  lightbox?.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && lightbox?.classList.contains('open')) {
      closeLightbox();
    }
  });

  function closeLightbox() {
    lightbox?.classList.remove('open');
  }
</script>
